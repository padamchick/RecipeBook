<div class="container">
  <div class="col-xs 12">
    <form (ngSubmit)="onSubmit(f)" #f="ngForm" class="example-form">

      <div class="col-xs-12">
        <mat-form-field class="full-width">
          <mat-label>Name</mat-label>
          <input matInput type="text" id="name" name="name" [(ngModel)]="recipe.name" #name="ngModel">
        </mat-form-field>
      </div>

      <div class="col-xs-12">
        <mat-form-field class="full-width">
          <mat-label>Image URL</mat-label>
          <input matInput type="text" id="imagePath" name="imagePath" [(ngModel)]="recipe.imagePath"
            #imagePath="ngModel">
        </mat-form-field>
      </div>

      <div class="col-xs-12">
        <img fxFlex [src]="recipe.imagePath" class="img-fluid">
      </div>

      <div class="col-xs-12">
        <mat-form-field class="full-width">
          <mat-label>Description</mat-label>
          <textarea matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" id="description" name="description"
            [(ngModel)]="recipe.description"></textarea>
        </mat-form-field>
      </div>

      <div class="col-xs-12">
        <div class="d-flex w-100 justify-content-start align-items-center">
          <button mat-icon-button class="mat-green-icon" type="button" (click)="onAddIngredient()">
            <mat-icon>add_shopping_cart</mat-icon>
          </button>
          Ingredients
        </div>

        <div *ngIf="recipe.ingredients" class="card">
          <div fxLayout="column">
            <div *ngFor="let ingredient of recipe.ingredients; let i = index" fxLayout="row" fxLayoutGap="1%"
              class="example-form">
              <mat-form-field style="min-width: 52%; width: auto;">
                <mat-label>Name</mat-label>
                <input matInput [name]="'name_'+i" [(ngModel)]="recipe.ingredients[i].name">
              </mat-form-field>

              <mat-form-field style="min-width: 20%; width: auto;">
                <mat-label>Amount</mat-label>
                <input matInput type="number" step="0.1" [name]="'amount_'+i"
                  [(ngModel)]="recipe.ingredients[i].amount">
              </mat-form-field>
              <mat-form-field style="min-width: 20%; width: auto;">
                <mat-label>Unit</mat-label>
                <input matInput type="text" [name]="'unit_'+i" [(ngModel)]="recipe.ingredients[i].unit">
              </mat-form-field>
              <div class="d-flex w-100 justify-content-start align-items-center">
                <button mat-icon-button color="warn" type="button" (click)="onDelete(i)">
                  <mat-icon>remove_circle_outline</mat-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <button mat-raised-button class="mat-green" type="submit">Save</button>
      <button mat-raised-button class="mat-warn" type="button" (click)="onCancel()">Cancel</button>

    </form>
  </div>
</div>
